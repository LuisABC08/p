{% extends 'base.html' %}

{% block content %}
<div class="container">
    <div class="checkout-container">
        <h1>Finalizar Compra</h1>
        
        <div class="checkout-content">
            <div class="checkout-form">
                <h2>Información de Envío y Pago</h2>
                <form method="post">
                    {% csrf_token %}
                    
                    <div class="form-group">
                        <label for="direccion">Dirección de Envío:</label>
                        <input type="text" name="direccion" id="direccion" 
                               value="{{ cliente.direccion|default:'' }}" 
                               class="form-control" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="metodo_pago">Método de Pago:</label>
                        <select name="metodo_pago" id="metodo_pago" class="form-control" required>
                            <option value="">Selecciona un método de pago</option>
                            <option value="tarjeta_credito">Tarjeta de Crédito</option>
                            <option value="tarjeta_debito">Tarjeta de Débito</option>
                            <option value="paypal">PayPal</option>
                            <option value="transferencia">Transferencia Bancaria</option>
                        </select>
                    </div>
                    
                    <div class="checkout-actions">
                        <button type="submit" class="btn btn-primary btn-large">Confirmar Pedido</button>
                        <a href="{% url 'ver_carrito' %}" class="btn btn-outline">Volver al Carrito</a>
                    </div>
                </form>
            </div>
            
            <div class="checkout-summary">
                <h2>Resumen del Pedido</h2>
                <div class="summary-items">
                    {% for item in pedido.items.all %}
                    <div class="summary-item">
                        <span>{{ item.cantidad }}x {{ item.producto.nombre }}</span>
                        <span>${{ item.subtotal }}</span>
                    </div>
                    {% endfor %}
                </div>
                <div class="summary-totals">
                    <div class="total-line">
                        <span>Subtotal:</span>
                        <span>${{ subtotal|floatformat:2 }}</span>
                    </div>
                    <div class="total-line">
                        <span>Impuestos:</span>
                        <span>${{ impuestos|floatformat:2 }}</span>
                    </div>
                    <div class="total-line total-final">
                        <span><strong>Total:</strong></span>
                        <span><strong>${{ total|floatformat:2 }}</strong></span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}